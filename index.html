<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Develop-specification-documents by RedrockTeam</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Develop-specification-documents</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/RedrockTeam/Develop-specification-documents" class="btn">View on GitHub</a>
      <a href="https://github.com/RedrockTeam/Develop-specification-documents/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/RedrockTeam/Develop-specification-documents/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="后端开发规范" class="anchor" href="#%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83" aria-hidden="true"><span class="octicon octicon-link"></span></a>后端开发规范</h1>

<h2>
<a id="目录结构" class="anchor" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>目录结构</h2>

<ol>
<li><p>所有路径一律为相对路径, 且由框架自带函数或变量生成</p></li>
<li><p>用户上传的文件, 网站的各种css, js, font/iconfont, 图片等公共资源放在框架中public区域下</p></li>
<li><p>禁止改动框架核心目录结构以及变更名字</p></li>
</ol>

<h2>
<a id="代码" class="anchor" href="#%E4%BB%A3%E7%A0%81" aria-hidden="true"><span class="octicon octicon-link"></span></a>代码</h2>

<h3>
<a id="编码" class="anchor" href="#%E7%BC%96%E7%A0%81" aria-hidden="true"><span class="octicon octicon-link"></span></a>编码</h3>

<ol>
<li>PHP代码必须只使用不带BOM的UTF-8</li>
</ol>

<h3>
<a id="注释" class="anchor" href="#%E6%B3%A8%E9%87%8A" aria-hidden="true"><span class="octicon octicon-link"></span></a>注释 </h3>

<p>1. 单行注释：在语句结尾用双反斜杠<code>//</code>注释 </p>

<p>2. 多行注释：多行注释以<code>/*</code>或<code>/**</code>符号开头，以<code>*/ </code>符号作为注释结束符</p>

<p>3. <code>if</code>, <code>else</code>语句注释写在<code>{</code>之后</p>

<p>4. 方法注释写在方法之前, 遵守<code>PHPDOC</code>标准</p>

<p>5. 属性注释类同方法注释</p>

<p>6. 类注释类同方法注释</p>

<h3>
<a id="命名规则" class="anchor" href="#%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99" aria-hidden="true"><span class="octicon octicon-link"></span></a>命名规则</h3>

<ol>
<li><p>统一使用Camel命名法和下划线命名(除类名首字母大写)</p></li>
<li><p>采用英文单词或其组合，便于记忆和阅读，切忌使用汉语拼音来命名</p></li>
<li><p>变量名使用全名, 不可使用单字母(除循环迭代变量)</p></li>
<li><p>常量名全部使用大写字母和下滑线组成,常量的名称中不允许出现小写字母，可使用分隔符作为下划线</p></li>
</ol>

<h3>
<a id="书写规则" class="anchor" href="#%E4%B9%A6%E5%86%99%E8%A7%84%E5%88%99" aria-hidden="true"><span class="octicon octicon-link"></span></a>书写规则</h3>

<ol>
<li>
<p>文件 </p>

<ul>
<li><p>所有的PHP文件必须使用<code>LF</code>作为行结束符, 大多数IDE自动转换</p></li>
<li><p>所有PHP文件必须以一个空行结束</p></li>
<li><p>纯PHP代码的文件关闭标签<code>?&gt;</code>必须省略 </p></li>
</ul>
</li>
<li>
<p>行</p>

<ul>
<li><p>行长度不可有硬限制</p></li>
<li><p>行实际长度不应超过80个字符, 较长的行应当被拆分成多个不超过80个字符的后续行</p></li>
<li><p>空行可以用来改善可读性和区分相关的代码块</p></li>
<li><p>一行不应多于一个语句</p></li>
</ul>
</li>
<li>
<p>控制结构 </p>

<ul>
<li><p>控制结构关键词之后必须有一个空格 </p></li>
<li><p>左括号之后不可有空格 </p></li>
<li><p>右括号之前不可有空格 </p></li>
<li><p>在右括号和左花括号之间必须有一个空格 </p></li>
<li><p>代码主体必须有一次缩进 </p></li>
<li><p>右花括号必须主体的下一行</p></li>
<li><p>每个结构的主体必须被括在花括号里</p></li>
<li><p>缩进使用四个<code>space</code>(软tab) </p></li>
</ul>
</li>
<li>
<p>运算符</p>

<ul>
<li>每个运算符与两边参与运算的值或表达式中间要有一个空格</li>
</ul>
</li>
<li>
<p>引号</p>

<ul>
<li>没有变量的场合禁止使用双引号, 优先使用单引号</li>
</ul>
</li>
<li>
<p>关键词</p>

<ul>
<li><p>PHP常量true, false和null必须使用小写</p></li>
<li><p>禁止在变量命名使用关键字</p></li>
</ul>
</li>
</ol>

<h2>
<a id="数据库" class="anchor" href="#%E6%95%B0%E6%8D%AE%E5%BA%93" aria-hidden="true"><span class="octicon octicon-link"></span></a>数据库</h2>

<ol>
<li><p>兼顾性能的同时尽量遵守范式</p></li>
<li><p>记录禁止硬删除, 统一使用软删除</p></li>
<li><p>预留访问量统计表(访问量精确到每个页面)</p></li>
<li><p>原则上每张表须有一个主键</p></li>
</ol>

<h2>
<a id="合作开发" class="anchor" href="#%E5%90%88%E4%BD%9C%E5%BC%80%E5%8F%91" aria-hidden="true"><span class="octicon octicon-link"></span></a>合作开发</h2>

<ol>
<li><p>开发使用git作为版本管理器, 托管平台可使用<a href="https://github.com" title="https://github.com">Github</a>或<a href="http://git.oschina.net/" title="http://git.oschina.net/">Oschina</a></p></li>
<li><p>项目开始前需初始化<code>.gitignore</code>文件, 忽略包括但不限于如<code>.idea/</code>, <code>*/config.php</code>, <code>public/uploads/*</code>, <code>.DS_store</code>等文件</p></li>
<li><p>每次commit需附带更改内容注释</p></li>
<li><p>项目出现冲突需解决冲突后才能提交, 禁止强行push</p></li>
</ol>

<h2>
<a id="接口规范" class="anchor" href="#%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83" aria-hidden="true"><span class="octicon octicon-link"></span></a>接口规范</h2>

<ol>
<li><p>需要有接口文档</p></li>
<li><p>接口文档需有<code>请求接口</code>, <code>请求数据</code>, <code>返回数据</code>, 对每条数据的注释说明</p></li>
<li><p>规定状态码</p></li>
<li>
<p>返回数据统一按照:</p>

<pre><code>            [
                "data":"",//数据区域
                "info":"",//状态信息
                "status":""//返回状态码
            ] 
</code></pre>
</li>
</ol>

<h2>
<a id="部署" class="anchor" href="#%E9%83%A8%E7%BD%B2" aria-hidden="true"><span class="octicon octicon-link"></span></a>部署</h2>

<ol>
<li>数据库账号密码禁止上传代码托管平台</li>
</ol>

<h2>
<a id="开发文档" class="anchor" href="#%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3" aria-hidden="true"><span class="octicon octicon-link"></span></a>开发文档</h2>

<ol>
<li>
<p>需要有开发文档和数据字典</p>

<h2>
<a id="其他" class="anchor" href="#%E5%85%B6%E4%BB%96" aria-hidden="true"><span class="octicon octicon-link"></span></a>其他</h2>
</li>
<li><p>版权声明</p></li>
<li><p>开源协议</p></li>
<li><p>广告位 </p></li>
</ol>

<h1>
<a id="author-by-excelsior" class="anchor" href="#author-by-excelsior" aria-hidden="true"><span class="octicon octicon-link"></span></a>Author By Excelsior</h1>

<h4>
<a id="命名" class="anchor" href="#%E5%91%BD%E5%90%8D" aria-hidden="true"><span class="octicon octicon-link"></span></a>命名</h4>

<hr>

<ul>
<li>
<p><strong>函数</strong>：函数命名都应该采用<strong>驼峰法</strong>，多个单词的第一个单词小写，其余单词只需首字母大写，通常来说函数的名字可以长一些，应该做到  <strong>见名知意</strong>  </p>

<ul>
<li><strong>公用函数</strong></li>
<li>
<strong>私有函数</strong>：在函数名前添加一个   <strong>_</strong>  下划线</li>
</ul>
</li>
</ul>

<div class="highlight highlight-PHP"><pre><span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">userInfoUpdate</span>() { <span class="pl-c">/* Do Something*/</span> }</span>
<span class="pl-s1">    <span class="pl-k">private</span> <span class="pl-k">function</span> <span class="pl-en">_formatAjaxData</span>() { <span class="pl-c">/* Do Something*/</span> }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-c">// 如添加一篇文章的函数</span></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">add</span> () { <span class="pl-c">/* 这样的函数名不应出现 */</span>}</span>
<span class="pl-s1">    <span class="pl-c">// 最好改为</span></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">addArtticle</span>() { <span class="pl-c">/**/</span> }</span></pre></div>

<ul>
<li>
<strong>变量名</strong>：统一采用<strong>小写字母</strong>和<strong>下划线</strong>的方式

<ul>
<li>类中的私有变量应在变量名前加<strong>下划线</strong>
</li>
<li>一般变量中不应出现数字(网上有些例子，单词To写成2，这是不规范的)</li>
<li>常量采用<strong>大写字母</strong>加<strong>下划线</strong>的方式，可以出现<strong>数字</strong>
</li>
<li>通常session变量命名以 <strong>S_</strong> 作为开头</li>
</ul>
</li>
</ul>

<div class="highlight highlight-PHP"><pre><span class="pl-s1">    <span class="pl-smi">$user_info</span> <span class="pl-k">=</span> [];</span>
<span class="pl-s1">    <span class="pl-k">class</span> <span class="pl-en">Demo</span> {</span>
<span class="pl-s1">        <span class="pl-k">public</span> <span class="pl-smi">$user_name</span>;</span>
<span class="pl-s1">        <span class="pl-k">protected</span> <span class="pl-smi">$_user_age</span>;</span>
<span class="pl-s1">        <span class="pl-k">private</span> <span class="pl-smi">$_user_pass</span>;</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">const</span> <span class="pl-c1">USER_TEL</span> <span class="pl-k">=</span> <span class="pl-c1">110</span>;</span>
<span class="pl-s1">    <span class="pl-c1">define</span>(<span class="pl-s"><span class="pl-pds">'</span>USER_TEL<span class="pl-pds">'</span></span>, <span class="pl-c1">110</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-smi">$_SESSION</span>[<span class="pl-s"><span class="pl-pds">'</span>S_user_info<span class="pl-pds">'</span></span>];</span></pre></div>

<hr>

<h4>
<a id="代码块相关" class="anchor" href="#%E4%BB%A3%E7%A0%81%E5%9D%97%E7%9B%B8%E5%85%B3" aria-hidden="true"><span class="octicon octicon-link"></span></a>代码块相关</h4>

<ul>
<li>
<strong>字符串</strong>:  PHP中使用 单引号和双引号的使用是有区别的。字符串中不包含变量时，使用<strong>单引号</strong>，包含变量时，使用<strong>双引号</strong>，且使用 <strong>花括号</strong> 包起来。原生  <strong>SQL</strong> 语句必须使用双引号。</li>
</ul>

<div class="highlight highlight-PHP"><pre><span class="pl-s1">    <span class="pl-smi">$str</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>枪毙5分钟<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-smi">$number</span> <span class="pl-k">=</span> <span class="pl-c1">10</span>;</span>
<span class="pl-s1">    <span class="pl-smi">$str</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>枪毙{$number}分钟<span class="pl-pds">'</span></span>；</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-c">// SQL语句</span></span>
<span class="pl-s1">    <span class="pl-smi">$select_sql</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-s1"><span class="pl-k">SELECT</span> <span class="pl-k">*</span> <span class="pl-k">FROM</span> user <span class="pl-k">WHERE</span> <span class="pl-s">`user_age`</span> <span class="pl-k">&lt;</span> <span class="pl-s">'<span class="pl-smi">$number</span>'</span></span><span class="pl-pds">"</span></span>;</span></pre></div>

<ul>
<li>
<strong>for循环</strong>: 循环变量如果是小循环(通常指循环10次以下)， 可直接使用 $i ,  $j, 如果超过10次以上，则应该使用有意义的变量名。</li>
</ul>

<div class="highlight highlight-PHP"><pre><span class="pl-s1">    <span class="pl-k">for</span>(<span class="pl-smi">$i</span> <span class="pl-k">=</span> <span class="pl-c1">0</span>; <span class="pl-smi">$i</span> <span class="pl-k">&lt;</span> <span class="pl-c1">10</span>; <span class="pl-smi">$i</span><span class="pl-k">++</span>){</span>
<span class="pl-s1"></span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">for</span>(<span class="pl-smi">$userCount</span> <span class="pl-k">=</span> <span class="pl-c1">0</span>; <span class="pl-smi">$userCount</span> <span class="pl-k">&lt;</span> <span class="pl-c1">20</span>; <span class="pl-smi">$userCount</span><span class="pl-k">++</span>){</span>
<span class="pl-s1"></span>
<span class="pl-s1">    }</span></pre></div>

<ul>
<li>
<strong>forEach循环</strong>: 键名和键值必须使用有意义的变量名</li>
</ul>

<div class="highlight highlight-PHP"><pre><span class="pl-s1">    <span class="pl-smi">$users</span> <span class="pl-k">=</span> [</span>
<span class="pl-s1">        <span class="pl-s"><span class="pl-pds">'</span>王洋辉<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>age<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">20</span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>gender<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>male<span class="pl-pds">'</span></span></span>
<span class="pl-s1">        ],</span>
<span class="pl-s1">        <span class="pl-s"><span class="pl-pds">'</span>隆宗益<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>age<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">20</span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>gender<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>male<span class="pl-pds">'</span></span></span>
<span class="pl-s1">        ]</span>
<span class="pl-s1">    ];</span>
<span class="pl-s1">    <span class="pl-k">foreach</span>(<span class="pl-smi">$users</span> <span class="pl-k">as</span> <span class="pl-smi">$userName</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">$userInfo</span>){</span>
<span class="pl-s1">        <span class="pl-c1">echo</span> <span class="pl-smi">$userInfo</span>[<span class="pl-s"><span class="pl-pds">'</span>age<span class="pl-pds">'</span></span>];</span>
<span class="pl-s1">    }</span></pre></div>

<ul>
<li>
<strong>switch</strong>: <strong>PHP</strong>的switch中的 <strong>case</strong> 是 <strong>==</strong> 相等比较，<strong>JS</strong>中是 <strong>===</strong> 全等比较，每个case要空四格，每个case必须有<strong>break</strong>，也空四格，每个switch必须有<strong>default</strong>
</li>
</ul>

<div class="highlight highlight-PHP"><pre><span class="pl-s1">    <span class="pl-smi">$users</span> <span class="pl-k">=</span> [</span>
<span class="pl-s1">        <span class="pl-s"><span class="pl-pds">'</span>王洋辉<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>age<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">20</span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>gender<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>male<span class="pl-pds">'</span></span></span>
<span class="pl-s1">        ],</span>
<span class="pl-s1">        <span class="pl-s"><span class="pl-pds">'</span>隆宗益<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>age<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">20</span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>gender<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>male<span class="pl-pds">'</span></span></span>
<span class="pl-s1">        ]</span>
<span class="pl-s1">    ];</span>
<span class="pl-s1">    <span class="pl-k">switch</span>(<span class="pl-smi">$userInfo</span>[<span class="pl-s"><span class="pl-pds">'</span>gender<span class="pl-pds">'</span></span>]) {</span>
<span class="pl-s1">        <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">'</span>male<span class="pl-pds">'</span></span>:</span>
<span class="pl-s1">            <span class="pl-c">/* balabalabala */</span></span>
<span class="pl-s1">            <span class="pl-k">break</span>;</span>
<span class="pl-s1">        <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">'</span>female<span class="pl-pds">'</span></span>:</span>
<span class="pl-s1">            <span class="pl-c">/* balabalabala */</span></span>
<span class="pl-s1">            <span class="pl-k">break</span>;</span>
<span class="pl-s1">        <span class="pl-k">default</span>: </span>
<span class="pl-s1">            <span class="pl-c">/* 这是人妖咯 */</span></span>
<span class="pl-s1">            <span class="pl-k">break</span>;</span>
<span class="pl-s1">    }</span></pre></div>

<ul>
<li>
<p><strong>if</strong>/<strong>elesif</strong>:  使用 <strong>if</strong> / <strong>elseif</strong> 的控制语句的控制语句必须包在花括号内, 且条件语句的圆括号前后都必须有一个空格。</p>

<div class="highlight highlight-PHP"><pre><span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-smi">$user_name</span> <span class="pl-k">!</span><span class="pl-k">=</span> <span class="pl-smi">$_POST</span>[<span class="pl-s"><span class="pl-pds">'</span>user_name<span class="pl-pds">'</span></span>]) </span>
<span class="pl-s1">     <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>敢这样写的拖出去枪毙5分钟<span class="pl-pds">'</span></span>;</span></pre></div>

<ul>
<li>在圆括号里的条件语句，操作符必须用空格分开，鼓励使用多重圆括号以提高在复杂的条件中划分逻辑组合。<br>
</li>
</ul>

<div class="highlight highlight-PHP"><pre><span class="pl-s1"><span class="pl-k">if</span> (<span class="pl-smi">$user_name</span> <span class="pl-k">!</span><span class="pl-k">=</span> <span class="pl-smi">$_POST</span>[<span class="pl-s"><span class="pl-pds">'</span>user_name<span class="pl-pds">'</span></span>]) {</span>
<span class="pl-s1">    <span class="pl-c">/** balabalabalabala **/</span></span>
<span class="pl-s1">}</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// 使用多重括号</span></span>
<span class="pl-s1"><span class="pl-k">if</span> ((<span class="pl-smi">$total_number</span> <span class="pl-k">-</span> <span class="pl-smi">$user_number</span>) <span class="pl-k">/</span> <span class="pl-smi">$total_number</span>) {</span>
<span class="pl-s1">    <span class="pl-c">/* balabalabalabala */</span></span>
<span class="pl-s1">}</span></pre></div>

<ul>
<li>
<strong>elseif</strong> 的格式规范如下</li>
</ul>

<div class="highlight highlight-PHP"><pre><span class="pl-s1">    <span class="pl-k">if</span> (<span class="pl-smi">$number</span> <span class="pl-k">!</span><span class="pl-k">=</span> <span class="pl-c1">2</span>) {</span>
<span class="pl-s1">        <span class="pl-c">/** balabalabalabala **/</span></span>
<span class="pl-s1">    } <span class="pl-k">elseif</span> (<span class="pl-smi">$number</span> <span class="pl-k">!</span><span class="pl-k">=</span> <span class="pl-c1">3</span>) {</span>
<span class="pl-s1"></span>
<span class="pl-s1">    } <span class="pl-k">elseif</span> (<span class="pl-smi">$number</span> <span class="pl-k">!</span><span class="pl-k">=</span> <span class="pl-c1">4</span>) {</span>
<span class="pl-s1"></span>
<span class="pl-s1">    } <span class="pl-k">else</span> {</span>
<span class="pl-s1"></span>
<span class="pl-s1">    }</span></pre></div>
</li>
</ul>

<hr>

<h4>
<a id="thinkphp开发规范" class="anchor" href="#thinkphp%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83" aria-hidden="true"><span class="octicon octicon-link"></span></a>ThinkPHP开发规范</h4>

<ul>
<li><p><strong>目录结构</strong>
<img src="./QQ20150721-1@2x.png" alt="Alt text"></p></li>
<li>
<p><strong>各种细节</strong></p>

<ul>
<li><p>使用layout布局，页面头尾分离---<a href="http://document.thinkphp.cn/manual_3_2.html#template_layout">模板布局</a></p></li>
<li><p>在html页面中的连接</p></li>
</ul>

<div class="highlight highlight-Html"><pre>   <span class="pl-c">&lt;!-- 使用系统常量或者使用U函数 --&gt;</span>
  &lt;<span class="pl-ent">a</span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>__CONTROLLER__/addArticle<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">a</span>&gt;

  <span class="pl-c">&lt;!-- 指向Article下的addArticle方法，虽然是正确地，但不允许 --&gt;</span>
  &lt;<span class="pl-ent">a</span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>article/addArticle<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">a</span>&gt;</pre></div>

<ul>
<li>文件上传的配置
 文件上传的配置应该写在Common/Confo/conf.php里</li>
</ul>

<div class="highlight highlight-PHP"><pre><span class="pl-s1"> <span class="pl-c">/** conf.php  **/</span></span>
<span class="pl-s1"> <span class="pl-k">return</span> <span class="pl-c1">array</span>(</span>
<span class="pl-s1">    <span class="pl-c">// 上传的基本配置</span></span>
<span class="pl-s1">   <span class="pl-s"><span class="pl-pds">'</span>uploadConfig<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">array</span>(</span>
<span class="pl-s1">       <span class="pl-s"><span class="pl-pds">'</span>maxSize<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">0</span>,</span>
<span class="pl-s1">       <span class="pl-s"><span class="pl-pds">'</span>rootPath<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>./Public/<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">       <span class="pl-s"><span class="pl-pds">'</span>exts<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">       <span class="pl-s"><span class="pl-pds">'</span>autoSub<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">false</span></span>
<span class="pl-s1">   ),</span>
<span class="pl-s1">);</span></pre></div>

<pre><code>然后在具体的位置通过  **C函数**  读取出来，并补充具体的参数
</code></pre>

<div class="highlight highlight-PHP"><pre><span class="pl-s1"> <span class="pl-c">/** ArticleController.class.php  **/</span></span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">postArticle</span>() {</span>
<span class="pl-s1">        <span class="pl-smi">$article_img</span> <span class="pl-k">=</span> <span class="pl-smi">$_FILES</span>[<span class="pl-s"><span class="pl-pds">'</span>img<span class="pl-pds">'</span></span>];</span>
<span class="pl-s1"></span>
<span class="pl-s1">        <span class="pl-c">// 基本配置</span></span>
<span class="pl-s1">        <span class="pl-smi">$upload_config</span> <span class="pl-k">=</span> C(<span class="pl-s"><span class="pl-pds">'</span>uploadConfig<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1">        <span class="pl-c">// 上传的具体配置</span></span>
<span class="pl-s1">        <span class="pl-smi">$upload_config</span>[<span class="pl-s"><span class="pl-pds">'</span>savePath<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>upload/admin<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">        <span class="pl-c">/** balalala **/</span></span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span></pre></div>

<ul>
<li>对于表单字段要使用  <strong>I函数</strong>  接收，并用  <strong>trim()</strong>  对其过滤</li>
</ul>

<div class="highlight highlight-PHP"><pre><span class="pl-s1">        <span class="pl-c">/*</span></span>
<span class="pl-s1"><span class="pl-c">         * I 函数</span></span>
<span class="pl-s1"><span class="pl-c">         * 参数一：接收的数据</span></span>
<span class="pl-s1"><span class="pl-c">         * 参数二：默认返回值</span></span>
<span class="pl-s1"><span class="pl-c">         * 参数三：过滤方式(默认方法为 htmlspecialchars)</span></span>
<span class="pl-s1"><span class="pl-c">         * 第三个参数的方法还有很多，自行谷歌之</span></span>
<span class="pl-s1"><span class="pl-c">         */</span></span>
<span class="pl-s1">        <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">postArticle</span>() {</span>
<span class="pl-s1">            <span class="pl-smi">$article_content</span> <span class="pl-k">=</span> I(<span class="pl-s"><span class="pl-pds">'</span>post.article_content<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>strip_tags<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1">            <span class="pl-smi">$tel</span> <span class="pl-k">=</span> I(<span class="pl-s"><span class="pl-pds">'</span>post.tel<span class="pl-pds">'</span></span>, <span class="pl-c1">0</span>, <span class="pl-s"><span class="pl-pds">'</span>intval<span class="pl-pds">'</span></span>);  <span class="pl-c">// 纯数字数据使用intval过滤 </span></span>
<span class="pl-s1">        }</span></pre></div>

<ul>
<li>关于Ajax请求的返回格式</li>
</ul>

<div class="highlight highlight-PHP"><pre><span class="pl-s1"></span>
<span class="pl-s1">        <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">ajaxReturn</span>($) {</span>
<span class="pl-s1">            <span class="pl-k">return</span> <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span>ajaxReturn([</span>
<span class="pl-s1">                <span class="pl-s"><span class="pl-pds">'</span>status<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">200</span> ， <span class="pl-c">// HTTP状态码</span></span>
<span class="pl-s1">                <span class="pl-s"><span class="pl-pds">'</span>info<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>用户名或密码错误!<span class="pl-pds">'</span></span>, <span class="pl-c">// 提示信息</span></span>
<span class="pl-s1">                <span class="pl-c">// 具体数据</span></span>
<span class="pl-s1">                <span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> [</span>
<span class="pl-s1">                    [</span>
<span class="pl-s1">                        <span class="pl-s"><span class="pl-pds">'</span>article_title<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>文章一<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">                        <span class="pl-s"><span class="pl-pds">'</span>article_content<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>哈哈哈哈哈哈哈<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">                        <span class="pl-s"><span class="pl-pds">'</span>article_post_date<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>时间戳<span class="pl-pds">'</span></span></span>
<span class="pl-s1">                    ],</span>
<span class="pl-s1">                    [</span>
<span class="pl-s1">                        <span class="pl-s"><span class="pl-pds">'</span>article_title<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>文章一<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">                        <span class="pl-s"><span class="pl-pds">'</span>article_content<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>哈哈哈哈哈哈哈<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">                        <span class="pl-s"><span class="pl-pds">'</span>article_post_date<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>时间戳<span class="pl-pds">'</span></span></span>
<span class="pl-s1">                    ],</span>
<span class="pl-s1">                ]</span>
<span class="pl-s1">            ]);</span>
<span class="pl-s1">        }</span>
<span class="pl-s1"></span></pre></div>
</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/RedrockTeam/Develop-specification-documents">Develop-specification-documents</a> is maintained by <a href="https://github.com/RedrockTeam">RedrockTeam</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

